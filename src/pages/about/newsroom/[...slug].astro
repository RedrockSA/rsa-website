---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const news = await getCollection('news');
  return news.map((article) => ({
    params: { slug: article.slug },
    props: { article },
  }));
}

const { article } = Astro.props;
const { Content } = await article.render();
const date = new Date(article.data.date);
const formatted = date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
---

<BaseLayout title={`${article.data.title} | Redrock Strategic Advisors`} description={article.data.description}>

  <div style="padding-top: 120px;"></div>

  <main class="container-narrow py-16" style="min-height: 60vh;">
    <a href="/about/newsroom" class="text-[#C80026] text-sm mb-6 inline-block">&larr; Back to Newsroom</a>
    <h1 class="text-3xl font-bold text-secondary-900 mb-2">{article.data.title}</h1>
    <p class="text-sm text-secondary-500 mb-8">{formatted}</p>
    <div class="prose prose-lg max-w-none">
      <Content />
    </div>
  </main>
</BaseLayout>
